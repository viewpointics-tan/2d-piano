import{r as e,R as t,S as n,a as o}from"./vendor.79dd8614.js";const l=(e,t)=>Math.floor(e/t),r=(e,t)=>(e%t+t)%t,a=["C","C♯","D","D♯","E","F","F♯","G","G♯","A","A♯","B"],s=({keyNumber:n,keyHeight:o,keyWidth:l,parity:s})=>{const d={width:`${l}mm`,height:`${o}mm`},[i,m]=e.exports.useState(!1),c=e=>{m(!1),document.dispatchEvent(new CustomEvent("noteOff",{detail:{note:n+60}}))};return t.createElement("div",{style:d},t.createElement("div",{className:"flex-shrink-0 rounded-lg h-full shadow-lg flex justify-evenly items-center "+(i?"bg-red-300":s?"bg-white":"bg-yellow-200"),style:{width:"95%",height:"90%"},onPointerDown:()=>{m(!0),document.dispatchEvent(new CustomEvent("noteOn",{detail:{note:n+60}}))},onTouchEnd:c,onMouseUp:c,onMouseLeave:c,onContextMenu:e=>{e.preventDefault()}},t.createElement("div",{className:"text-2xl font-serif select-none"},n),t.createElement("div",{className:"text-3xl font-serif select-none"},a[r(n,12)])))},d=({rowNumber:e,rowIndex:n,rowLength:o,keyHeight:a,keyWidth:d,deltaX:i,deltaY:m})=>{const c={width:o*d+"mm",height:`${a}mm`,left:d/2*(e-1-n)+"mm"},u=[...Array(o).keys()].map((e=>{const o=e-i,c=n-m,u=7*l(o,2)+(4-r(c,2))*r(o,2)-3*l(c,2)-1*r(c,2),h=0===r(o,2)!=(0===r(c,2));return t.createElement(s,{keyNumber:u,keyHeight:a,keyWidth:d,parity:h})}));return t.createElement("div",{className:"flex flex-row relative",style:c},u)},i=()=>{e.exports.useEffect((()=>{const e=[{}],t=new AudioContext,o=n.instrument(t,"acoustic_grand_piano"),l=e=>o.then((n=>n.play(`${e}`,t.currentTime,{gain:20}))).catch((e=>{console.log(e)}));document.addEventListener("noteOn",(t=>{const{note:n}=t.detail;e.push({note:n,value:l(n)})})),document.addEventListener("noteOff",(t=>{var n;const{note:o}=t.detail,l=e.findIndex((e=>e.note===o));null==(n=e[l])||n.value.then((e=>null==e?void 0:e.stop())),e.splice(l,1)}))}),[]);const o=[...Array(7).keys()].map((e=>t.createElement(d,{rowNumber:7,rowIndex:e,rowLength:10,keyHeight:20,keyWidth:40,deltaX:2,deltaY:3})));return t.createElement("div",{className:"flex flex-col w-max",id:"app"},o)};o.render(t.createElement(t.StrictMode,null,t.createElement(i,null)),document.getElementById("root"));
