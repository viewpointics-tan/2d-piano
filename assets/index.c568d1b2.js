import{r as e,R as t,S as n,a as o}from"./vendor.79dd8614.js";const l=(e,t)=>Math.floor(e/t),a=(e,t)=>(e%t+t)%t,r=["C","C♯","D","D♯","E","F","F♯","G","G♯","A","A♯","B"],d=({keyNumber:n,keyHeight:o,keyWidth:l,parity:d})=>{const s={width:`${l}mm`,height:`${o}mm`},[i,c]=e.exports.useState(!1),m=()=>{c(!1),document.dispatchEvent(new CustomEvent("noteOff",{detail:{note:n+60}}))};return t.createElement("div",{style:s},t.createElement("div",{className:"flex-shrink-0 rounded-lg h-full shadow-lg flex justify-evenly items-center select-none "+(i?"bg-red-300":d?"bg-white":"bg-yellow-200"),style:{width:"95%",height:"90%"},onContextMenu:e=>{e.preventDefault()},onPointerDown:()=>{c(!0),document.dispatchEvent(new CustomEvent("noteOn",{detail:{note:n+60}}))},onTouchEnd:m,onMouseUp:m,onMouseLeave:m,onTouchCancel:m},t.createElement("div",{className:"text-2xl font-serif"},n),t.createElement("div",{className:"text-3xl font-serif"},r[a(n,12)])))},s=({rowNumber:e,rowIndex:n,rowLength:o,keyHeight:r,keyWidth:s,deltaX:i,deltaY:c})=>{const m={width:o*s+"mm",height:`${r}mm`,left:s/2*(e-1-n)+"mm"},u=[...Array(o).keys()].map((e=>{const o=e-i,m=n-c,u=7*l(o,2)+(4-a(m,2))*a(o,2)-3*l(m,2)-1*a(m,2),h=0===a(o,2)!=(0===a(m,2));return t.createElement(d,{keyNumber:u,keyHeight:r,keyWidth:s,parity:h})}));return t.createElement("div",{className:"flex flex-row relative",style:m},u)},i=()=>{e.exports.useEffect((()=>{const e=[],t=new AudioContext,o=n.instrument(t,"acoustic_grand_piano"),l=e=>o.then((n=>n.play(`${e}`,t.currentTime,{gain:20}))).catch((e=>{console.log(e)}));document.addEventListener("noteOn",(t=>{const{note:n}=t.detail,o={note:n,value:l(n)},a=e.findIndex((e=>e.note===n));-1===a?e.push(o):e.splice(a,1,o)})),document.addEventListener("noteOff",(t=>{const{note:n}=t.detail,o={note:n,value:void 0},l=e.findIndex((e=>e.note===n));e[l].value.then((e=>null==e?void 0:e.stop())),e.splice(l,1,o)}))}),[]);const o=[...Array(7).keys()].map((e=>t.createElement(s,{rowNumber:7,rowIndex:e,rowLength:10,keyHeight:20,keyWidth:40,deltaX:2,deltaY:3})));return t.createElement("div",{className:"flex flex-col w-max",id:"app"},o)};o.render(t.createElement(t.StrictMode,null,t.createElement(i,null)),document.getElementById("root"));
