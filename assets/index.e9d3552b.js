import{r as e,R as t,S as n,a as o}from"./vendor.79dd8614.js";const r=(e,t)=>Math.floor(e/t),a=(e,t)=>(e%t+t)%t,l=["C","C♯","D","D♯","E","F","F♯","G","G♯","A","A♯","B"],i=({keyNumber:n,keyHeight:o,keyWidth:r,parity:i})=>{const s={width:`${r}mm`,height:`${o}mm`},[d,m]=e.exports.useState(!1),c=()=>{m(!1),document.dispatchEvent(new CustomEvent("noteOff",{detail:{note:n+60}}))};return t.createElement("div",{style:s},t.createElement("div",{className:"flex-shrink-0 rounded-lg h-full shadow-lg flex justify-evenly items-center "+(d?"bg-red-300":i?"bg-white":"bg-yellow-200"),style:{width:"95%",height:"90%"},onPointerDown:()=>{m(!0),document.dispatchEvent(new CustomEvent("noteOn",{detail:{note:n+60}}))},onPointerUp:c,onPointerOut:c},t.createElement("div",{className:"text-2xl font-serif"},n),t.createElement("div",{className:"text-3xl font-serif"},l[a(n,12)])))},s=({rowNumber:e,rowIndex:n,rowLength:o,keyHeight:l,keyWidth:s,deltaX:d,deltaY:m})=>{const c={width:o*s+"mm",height:`${l}mm`,left:s/2*(e-1-n)+"mm"},h=[...Array(o).keys()].map((e=>{const o=e-d,c=n-m,h=7*r(o,2)+(4-a(c,2))*a(o,2)-3*r(c,2)-1*a(c,2),u=0===a(o,2)!=(0===a(c,2));return t.createElement(i,{keyNumber:h,keyHeight:l,keyWidth:s,parity:u})}));return t.createElement("div",{className:"flex flex-row relative",style:c},h)},d=()=>{e.exports.useEffect((()=>{const e=[{}],t=new AudioContext,o=e=>n.instrument(t,"acoustic_grand_piano").then((n=>n.play(`${e}`,t.currentTime,{gain:20}))).catch((e=>{console.log(e)}));document.addEventListener("noteOn",(t=>{const{note:n}=t.detail;e.push({note:n,value:o(n)})})),document.addEventListener("noteOff",(t=>{const{note:n}=t.detail,o=e.findIndex((e=>e.note===n));e[o].value.then((e=>e.stop())),e.splice(o,1)}))}),[]);const o=[...Array(5).keys()].map((e=>t.createElement(s,{rowNumber:5,rowIndex:e,rowLength:10,keyHeight:20,keyWidth:40,deltaX:2,deltaY:3})));return t.createElement("div",{className:"flex flex-col w-max",id:"app"},o)};o.render(t.createElement(t.StrictMode,null,t.createElement(d,null)),document.getElementById("root"));
